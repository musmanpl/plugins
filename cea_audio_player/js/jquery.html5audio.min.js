!function(t){t.fn.html5audio=function(e){function a(){var a=0==Me.find("div[class='fontMeasure']").length?t("<div/>").addClass("fontMeasure").appendTo(Me):Me.find("div[class='fontMeasure']");zi=new apTextScroller,zi.init(a,Ye,Ne,"left",e.scrollSeparator,e.scrollSpeed)}function i(t){if(Qt&&!li&&!wn){if(!yn){if(tn){if(t=t.originalEvent.touches,!(t&&0<t.length))return!1}else t.preventDefault();yn=!0,Kt.on(an,function(t){t:{var e;if(tn){if(t.originalEvent.touches&&t.originalEvent.touches.length)e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),n(e)}}).on(nn,function(t){t:if(yn){yn=!1,Kt.off(an).off(nn);var e;if(tn){if(t.originalEvent.touches&&t.originalEvent.touches.length)e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),n(e)}})}return!1}}function n(t){"horizontal"==un?sn=Math.max(0,Math.min(1,(t.pageX-_n.offset().left)/mn)):(sn=Math.max(0,Math.min(1,(t.pageY-_n.offset().top)/mn)),sn=1-sn),r()}function o(){return!Qt||li?!1:void(ln?(sn=on,ln=!1):(on=sn,sn=0,ln=!0))}function r(){"horizontal"==un?gn.css("width",sn*mn+"px"):gn.css("height",sn*mn+"px"),fi&&("youtube"==ei?ne?Ni&&Ni.setVolume(sn):"undefined"!=typeof dt(Xi)&&dt(Xi).pb_setVolume(sn):Aa?Oi&&(Oi.volume=sn):"undefined"!=typeof dt(Ei)&&dt(Ei).pb_setVolume(sn)),sn>0?Me.find(".player_volume").find("img").attr("src",me):Me.find(".player_volume").find("img").attr("src",_e),isMobile&&rn&&(fn&&clearTimeout(fn),fn=setTimeout(pn,hn))}function l(){rn&&fn&&clearTimeout(fn),vn.css("display","block"),dn.on("mousemove",d).on("mouseout",s),Kt.on("mouseout",s)}function s(){rn&&(fn&&clearTimeout(fn),fn=setTimeout(pn,hn)),vn.css("display","none"),dn.off("mousemove",d).off("mouseout",s),Kt.off("mouseout",s)}function d(t){if("horizontal"==un){var e=t.pageX-_n.offset().left;if(!St(e))return!1;0>e?e=0:e>mn&&(e=mn),t=parseInt(t.pageX-dn.offset().left-vn.width()/2,10),vn.css("left",t+"px"),e=Math.max(0,Math.min(1,e/mn)),e=parseInt(100*e,10)}else{if(e=t.pageY-_n.offset().top,!St(e))return!1;0>e?e=0:e>mn&&(e=mn),t=parseInt(e-vn.height()/2,10),vn.css("top",t+bn+"px"),e=Math.max(0,Math.min(1,e/mn)),e=parseInt(100*(1-e),10)}vn.find("p").html(e+" %")}function u(t){if(Qt&&!li&&fi&&!yn&&!si){if(!wn){if(tn){if(t=t.originalEvent.touches,!(t&&0<t.length))return!1}else t.preventDefault();wn=!0,Kt.on(an,function(t){t:{var e;if(tn){if(t.originalEvent.touches&&t.originalEvent.touches.length)e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),p(e,t)}}).on(nn,function(t){f(t)})}return!1}}function f(t){if(wn){wn=!1,Kt.off(an).off(nn);var e;if(tn){if(t.originalEvent.touches&&t.originalEvent.touches.length)e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)return!1;e=t.originalEvent.changedTouches}if(1<e.length)return!1;e=e[0]}else e=t;t.preventDefault(),p(e,t)}if(Ce)var a=setTimeout(function(){a&&clearTimeout(a),Mn=!1},500);return!1}function p(t,e){if(Ce){if(Ee){if(P(e))return $n||Vn>Xn-Wn?!1:(wn||(I(!0),Fn.clearRect(0,0,Hn,zn),_(Gn),b()),!1);if(!$n)return!1;Mn=!0;var a=t.pageX-Dn.offset().left-Hn/2,i=t.pageY-Dn.offset().top-zn/2,a=Math.atan2(i,a);a>-1*Math.PI&&a<-.5*Math.PI&&(a=2*Math.PI+a),Gn=a=Math.max(0,Math.min((a+Math.PI/2)/2*Math.PI*10))/100,Fn.clearRect(0,0,Hn,zn),_(Gn),b()}}else{Pn=t.pageX-In.offset().left,0>Pn?Pn=0:Pn>Sn&&(Pn=Sn),An.width(Pn);var a=Math.max(0,Math.min(1,Pn/Sn))}return St(a)?(kn=Gn,void c(a)):!1}function c(t){"youtube"==ei?ne?(t=(t*Ni.getDuration()).toFixed(1),St(t)&&Ni.seek(t)):"undefined"!=typeof dt(Xi)&&dt(Xi).pb_seek(t):Aa?Oi&&Oi.seekable&&0<Oi.seekable.length&&(!ae||isMobile?Oi.currentTime=t*Oi.duration:t*Oi.duration>=Oi.buffered.end(0)-5?Oi.currentTime=Oi.buffered.end(0)-5:Oi.currentTime=t*Oi.duration):"undefined"!=typeof dt(Ei)&&dt(Ei).pb_seek(t)}function h(){fi&&(Kn.css("display","block"),xn.on("mousemove",m).on("mouseout",y),Kt.on("mouseout",y))}function y(){fi&&(Kn.css("display","none"),xn.off("mousemove",m).off("mouseout",y),Kt.off("mouseout",y))}function m(t){if(Ce){if(Ee){if(P(t))return Kn.css("display","none"),!1;e=t.pageX-Dn.offset().left,t=t.pageY-Dn.offset().top,t=Math.atan2(t-zn/2,e-Hn/2),t>-1*Math.PI&&t<-.5*Math.PI&&(t=2*Math.PI+t),e=Math.max(0,Math.min((t+Math.PI/2)/2*Math.PI*10))/100,Kn.css("display","block")}}else{var e=t.pageX-In.offset().left;if(!St(e))return!1;0>e?e=0:e>Sn&&(e=Sn),t=parseInt(t.pageX-xn.offset().left-Kn.width()/2,10),Kn.css("left",t+"px"),e=Math.max(0,Math.min(1,e/Sn))}return St(e)?void g(e):!1}function g(t){if(!St(t))return!1;var e,a;return"youtube"==ei?ne?(a=Ni.getDuration(),e=t*a):"undefined"!=typeof dt(Xi)&&(a=dt(Xi).pb_getFlashDuration(),e=t*a):Aa?Oi&&(a=Oi.duration,e=t*a):"undefined"!=typeof dt(Ei)&&(a=dt(Ei).pb_getFlashDuration(),e=t*a),St(e)&&St(a)?void Kn.find("p").html(Mt(e)+ra+Ct(a)):!1}function _(t){Fn.beginPath(),Fn.arc(Hn/2,zn/2,Qn-Nn/2,-Un,qn*t-Un,!1),Fn.strokeStyle=Yn,Fn.lineCap="butt",Fn.lineWidth=Nn,Fn.stroke()}function v(t){Bn.beginPath(),Bn.arc(Hn/2,zn/2,Qn-Nn/2,-Un,qn*t-Un,!1),Bn.strokeStyle=jn,Bn.lineCap="butt",Bn.lineWidth=Nn,Bn.stroke()}function b(){if(hi)t=62,e=57,Fn.fillStyle=Yn,Fn.fillRect(t,e,14,45),Fn.fillRect(t+23,e,14,45);else{var t=65,e=57,a=65-t,i=102-e,n=Math.atan2(i,a)-Math.PI/3,i=Math.sqrt(a*a+i*i),a=Math.cos(n)*i+t,n=Math.sin(n)*i+e;Fn.beginPath(),Fn.fillStyle=Yn,Fn.moveTo(t,e),Fn.lineTo(65,102),Fn.lineTo(a,n),Fn.fill()}}function P(t){var e;if(tn){if(t.originalEvent.touches&&t.originalEvent.touches.length)t=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)return!1;t=t.originalEvent.changedTouches}if(1<t.length)return!1;e=t[0]}else e=t;t=e.pageX-Dn.offset().left,e=e.pageY-Dn.offset().top;var a=Hn/2,i=zn/2;return Vn=Math.sqrt((t-a)*(t-a)+(e-i)*(e-i)),Math.sqrt((t-a)*(t-a)+(e-i)*(e-i))<Xn}function k(e){0!=Me.find(".componentPlaylist").length&&(mi?"vertical"==ca?Oe.outerHeight(!0)>=Re.height()?(mi.reinitialise(),e&&(mi.scrollToY(0),t(".jspPane").css("top","0px"))):(mi.destroy(),mi=null):(mi.reinitialise(),e&&(mi.scrollToX(0),t(".jspPane").css("left","0px"))):(e=Me.find(".componentPlaylist"),mi=e.jScrollPane().data().jsp,e.on("jsp-initialised",function(t,e){}).jScrollPane({mouseWheelSpeed:20}),"horizontal"!=ca||isMobile||e.on("mousewheel",w)))}function w(t,e,a,i){return!Qt||li?!1:(mi&&mi.scrollByX(100*(e>0?-1:1)),!1)}function I(t){if(hi){if("youtube"==ei){if(!$i)return!1;ne?Ni.togglePlayback():("undefined"!=typeof dt(Xi)&&dt(Xi).pb_togglePlayback(),fi=!0)}else Aa?Oi&&Oi.pause():"undefined"!=typeof dt(Ei)&&dt(Ei).pb_pause();hi=!1,At("off")}else{if("youtube"==ei){if(!$i)return!1;ne?isMobile&&!Gi&&ze?(Qt=!1,tt("on")):Ni.togglePlayback():("undefined"!=typeof dt(Xi)&&dt(Xi).pb_togglePlayback(),fi=!0)}else Aa?Oi&&Oi.play():"undefined"!=typeof dt(Ei)&&dt(Ei).pb_play();hi=!0,xt("off")}return t?void 0:!1}function T(e){if(!Qt||li)return!1;e||(e=window.event),e.cancelBubble?e.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),e=t(e.currentTarget);var a=e.attr("data-id");return e.closest(".playlistItem").hasClass(ni)?!1:(ze=!0,M(),Zi.processPlaylistRequest(a),!1)}function A(e){if(!Qt||li)return!1;if(e||(e=window.event),e.cancelBubble?e.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),e=t(e.currentTarget).attr("class").split(" "),-1!=t.inArray("controls_prev",e))ze=!0,M(),Zi.advanceHandler(-1,!0);else if(-1!=t.inArray("controls_toggle",e)){if(!fi)return;I()}else if(-1!=t.inArray("controls_next",e))ze=!0,M(),Zi.advanceHandler(1,!0);else if(-1!=t.inArray("player_volume",e))isMobile&&rn?(fn&&clearTimeout(fn),cn?(dn.css("display","none"),cn=!1):(dn.css("display","block"),cn=!0,fn=setTimeout(pn,hn))):(o(),r());else if(-1!=t.inArray("player_download",e)){if(!Na)if(e=ei){var a=Zi.getCounter(),i=_i[a].download,a=Dt(a,!1);e=U(e,a,i),H(e.name,e.path)}else fa&&alert("Invalid data-type for file download function! Quitting."),Na=!1}else-1!=t.inArray("player_loop",e)?(ia?(Me.find(".player_loop").find("img").attr("src",he),ia=!1):(Me.find(".player_loop").find("img").attr("src",ye),ia=!0),Zi.setLooping(ia)):-1!=t.inArray("player_shuffle",e)&&(na?(Me.find(".player_shuffle").find("img").attr("src",be),na=!1):(Me.find(".player_shuffle").find("img").attr("src",Pe),na=!0),Zi.setRandom(na));return!1}function x(e){return Qt?(e||(e=window.event),e.cancelBubble?e.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),e=t(e.currentTarget).attr("class").split(" "),-1!=t.inArray("controls_prev",e)?Me.find(".controls_prev").find("img").attr("src",le):-1!=t.inArray("controls_toggle",e)?hi?xt("on"):At("on"):-1!=t.inArray("controls_next",e)?Me.find(".controls_next").find("img").attr("src",de):-1!=t.inArray("player_volume",e)?sn>0?Me.find(".player_volume").find("img").attr("src",ge):Me.find(".player_volume").find("img").attr("src",ve):-1!=t.inArray("player_download",e)?Me.find(".player_download").find("img").attr("src",we):-1!=t.inArray("player_loop",e)?ia?Me.find(".player_loop").find("img").attr("src",he):Me.find(".player_loop").find("img").attr("src",ye):-1!=t.inArray("player_shuffle",e)&&(na?Me.find(".player_shuffle").find("img").attr("src",be):Me.find(".player_shuffle").find("img").attr("src",Pe)),!1):void 0}function S(e){return Qt?(e||(e=window.event),e.cancelBubble?e.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),e=t(e.currentTarget).attr("class").split(" "),-1!=t.inArray("controls_prev",e)?Me.find(".controls_prev").find("img").attr("src",re):-1!=t.inArray("controls_toggle",e)?hi?xt("off"):At("off"):-1!=t.inArray("controls_next",e)?Me.find(".controls_next").find("img").attr("src",se):-1!=t.inArray("player_volume",e)?sn>0?Me.find(".player_volume").find("img").attr("src",me):Me.find(".player_volume").find("img").attr("src",_e):-1!=t.inArray("player_download",e)?Me.find(".player_download").find("img").attr("src",ke):-1!=t.inArray("player_loop",e)?ia?Me.find(".player_loop").find("img").attr("src",ye):Me.find(".player_loop").find("img").attr("src",he):-1!=t.inArray("player_shuffle",e)&&(na?Me.find(".player_shuffle").find("img").attr("src",Pe):Me.find(".player_shuffle").find("img").attr("src",be)),!1):void 0}function M(){if(!Xa&&-1!=Zi.getCounter()){var e=t(vi[Zi.getCounter()]);if(e&&e.hasClass("playlistSelected")){var a=e.attr("data-id");e.removeClass("playlistSelected").addClass("playlistNonSelected"),"undefined"!=typeof playlistItemEnabled&&playlistItemEnabled(Xt,He,e,a)}}}function C(){if(!Xa){var e=t(vi[Zi.getCounter()]);if(e&&e.hasClass("playlistNonSelected")){var a=e.attr("data-id");e.removeClass("playlistNonSelected").addClass("playlistSelected"),"undefined"!=typeof playlistItemDisabled&&playlistItemDisabled(Xt,He,e,a)}}}function E(){var t=e.activeItem;St(t)&&-1!=t?(0>t?t=0:t>Pi-1&&(t=Pi-1),Zi.setCounter(t,!1)):ze=!0}function D(){ri&&-1!=Zi.getCounter()&&(O(),It(),M())}function R(){O(),It();var e,a=0;for(a;Pi>a;a++)e=t(vi[a]).off("click",T),ka&&!isMobile&&e.off("mouseenter").off("mouseleave");ri&&(ri.children().each(function(){var e=t(this);e.data("hap_wrap_player")&&e.data("hap_wrap_player").destroyPlaylist()}),ri.empty(),ri=null),Oe.empty(),Xa=oi=!1,Fa=Ya=Ja=null,Da=Ea=Ca=!1,ua=null,Zi.reSetCounter(),_i=[],vi=[],bi=[],mi&&mi.reinitialise()}function O(){Wi&&(ne?Ni&&Ni.stop():"undefined"!=typeof dt(Xi)&&dt(Xi).pb_dispose(),Wi=!1),Aa?(ai&&clearInterval(ai),Oi&&(Oi.pause(),Oi.src=""),Ri&&Ri.off("ended pause play canplay canplaythrough loadedmetadata")):"undefined"!=typeof dt(Ei)&&dt(Ei).pb_dispose(),Tt(),Fa?Be.css("display","block"):Be.css("display","none"),kn=null,di=fi=hi=si=!1,Qa||(za=void 0)}function L(e){if("undefined"==typeof e)return fa&&alert("setPlaylist method requires data parameter. loadPlaylist failed."),!1;if("undefined"==typeof e.hidden)return fa&&alert("setPlaylist method requires data.hidden parameter. loadPlaylist failed."),!1;var a=Bt(e.hidden);if("undefined"==typeof e.id)return fa&&alert("setPlaylist method requires data.id parameter. loadPlaylist failed."),!1;if(e=e.id,li=!0,gi||(gi=!0),wt(),Oe.css("opacity",0),ri&&R(),oi=!1,Xa=a,De&&isIE?(a=t(qe.find(e).css("display","block").clone().wrap("<p>").parent().html()),t(qe.find(e).css("display","none"))):(a=qe.find(e).css("display","block").clone(),qe.find(e).css("display","none")),a.css("fontSize",0),0==a.length)return fa&&console.log('Failed to select playlist! Make sure that element: "'+e+'" exist in playlist list! Quitting.'),kt(),!1;if(Xa)Ii.empty(),a.appendTo(Ii),Ma=0,Da=Ea=Sa=!0,ri=Ti;else{if(!mi&&0==Oe.length)return fa&&alert("playlist_inner html element seems to be missing! You could be trying to use loadPlaylist method without having necessary html elements inside componentWrapper. Quitting."),!1;a.appendTo(Oe),ri=a}_i=[],vi=[],bi=[],Ci=[],a.find("li[class*='playlistItem']").each(function(){Ci.push(t(this))}),V()}function V(){Ci.length?N():j()}function N(){qa=Ba=ja=Ya=Oa=null,Ra=!1;var e=Ci[0],a=e.attr("data-type").toLowerCase(),i=e.attr("data-path"),n=e.hasClass(Wa);if(Mi=[],e.hasClass($a)&&(Ra=!0),void 0==e.attr("data-plink")||Nt(e.attr("data-plink"))||(Oa=e.attr("data-plink")),void 0!=e.attr("data-dlink")&&("youtube_single"==a||"youtube_single_list"==a||"youtube_playlist"==a?Nt(e.attr("data-dlink"))||(Ya=e.attr("data-dlink")):Ya=Nt(e.attr("data-dlink"))?!0:e.attr("data-dlink")),void 0!=e.attr("data-download")&&("youtube_single"==a||"youtube_single_list"==a||"youtube_playlist"==a?Nt(e.attr("data-download"))||(ja=e.attr("data-download")):ja=Nt(e.attr("data-download"))?!0:e.attr("data-download")),void 0==e.attr("data-thumb")||Nt(e.attr("data-thumb"))||(Ba=e.attr("data-thumb")),Nt(t.trim(e.html()))||(qa=e.html()),n)Ja=e,Ci.shift(),V();else if("local"==a)Ja=e,Ci.shift(),V();else if("soundcloud"==a)Ja=e.data("toremove","true"),ti=0,ut(i);else if("podcast"==a)Ja=e.data("toremove","true"),n="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=xml&num="+Je+"&callback=?&q="+encodeURIComponent(i),t.ajax({type:"GET",url:n,dataType:"jsonp",cache:!1}).done(function(e){if(null==e.responseData)fa&&alert("Playlist process failed, podcast: "+i),Ja&&"true"==Ja.data("toremove")&&Ja.remove(),Ci.shift(),V();else{if(ieBelow9){e=jt(e.responseData.xmlString);var a;t(e).find("item").each(function(){a=t(this),r={type:"podcast"},r.mp3=a.find("enclosure").attr("url"),r.ogg="",r.title=a.find("title").text(),0<a.find("media\\:thumbnail").length&&a.find("media\\:thumbnail").attr("url")?r.thumb=a.find("media\\:thumbnail").attr("url"):Ba&&(r.thumb=Ba),Oa&&(r.url=Oa),Ya&&(r.dlink=Ya),ja&&(r.download=ja),Mi.push(r)})}else{ki.html(e.responseData.xmlString),e=ki.get(0).getElementsByTagName("item");var n,o,r,l=0,s=e.length;for(l;s>l;l++)n=e[l],void 0!=n.getElementsByTagName("enclosure")[0]&&(r={type:"podcast"},r.mp3=n.getElementsByTagName("enclosure")[0].getAttribute("url"),r.ogg="",void 0!=n.getElementsByTagName("itunes:duration")[0]&&(o=Yt(n.getElementsByTagName("itunes:duration")[0].childNodes[0].nodeValue),r.length=parseInt(1e3*o,10)),void 0!=n.getElementsByTagName("media:thumbnail")[0]&&void 0!=n.getElementsByTagName("media:thumbnail")[0].getAttribute("url")?r.thumb=n.getElementsByTagName("media:thumbnail")[0].getAttribute("url"):Ba&&(r.thumb=Ba),r.title=n.getElementsByTagName("title")[0].childNodes[0].nodeValue,Oa&&(r.url=Oa),Ya&&(r.dlink=Ya),ja&&(r.download=ja),Mi.push(r))}Y()}}).fail(function(t,e,a){fa&&alert("Parse feed error: "+t.responseText),fa&&alert("Playlist process failed, podcast: "+i),Ja&&"true"==Ja.data("toremove")&&Ja.remove(),Ci.shift(),V()});else if("folder"==a){Ja=e.data("toremove","true");var n=hap_source_path+"folder_parser.php",o=!0;void 0!=e.attr("data-subdirs")&&"false"==e.attr("data-subdirs")&&(o=!1),o={dir:i,subdirs:o},t.ajax({type:"GET",url:n,data:o,dataType:"json"}).done(function(t){Vt(t,"title");var e,a,i=0,n=t.length;for(wa&&(xa=Mi.length?Mi.length-1:0),i;n>i;i++)if(e=t[i],a=e.path,a=a.replace(/\\'/g,"'"),a=a.replace(/\\"/g,'"'),a=a.replace(/\\0/g,"\x00"),path=a=a.replace(/\\\\/g,"\\"),a={type:"folder"},/.mp3/.test(path)){a.mp3=path,a.ogg=path.substr(0,path.lastIndexOf("."))+".ogg";var o=path.substr(0,path.lastIndexOf("."));title=/\//i.test(o)?o.substr(o.lastIndexOf("/")+1):o,title=title.split("_").join(" "),a.title=title,a.thumb=path.substr(0,path.lastIndexOf("."))+".jpg",a.size=parseInt(e.size,10),a.lastmod=parseInt(e.lastmod,10),Oa&&(a.url=Oa),Ya&&(a.dlink=Ya),ja&&(a.download=ja),Ba&&(a.thumb=Ba),Mi.push(a)}Mi.length&&wa?ct():Y()}).fail(function(t,e,a){fa&&alert("Read folder error! Make sure you run this online or on local server!"),fa&&alert("Playlist process failed, folder: "+i),Ja&&"true"==Ja.data("toremove")&&Ja.remove(),Ci.shift(),V()})}else if("xml"==a){Ja=e;var r,n=hap_source_path+i,l=[];t.ajax({type:"GET",url:n,dataType:"html",cache:!1}).done(function(a){Ci.shift(),t(a).find("li[class='playlistItem']").each(function(){r=Ht(t(this)),Ja?Ja.after(t(r)):0<ri.children().size()?t(r).prependTo(ri):t(r).appendTo(ri),Ja=t(r),l.push(t(r))}),a=0;var i=l.length;for(l.reverse(),a;i>a;a++)Ci.unshift(l[a]);l=null,e.remove(),V()}).fail(function(t,e,a){fa&&alert("Playlist process failed, xml: "+i),Ja&&Ja.remove(),Ci.shift(),V()})}else if("database_data"==a||"database_html"==a)if(void 0==e.attr("data-table")||Nt(e.attr("data-table")))fa&&(alert("Database table missing!"),alert("Playlist process failed, database query: "+i)),Ci.shift(),V();else{var s=o=null,d=null;void 0==e.attr("data-limit")||Nt(e.attr("data-limit"))||(o=parseInt(e.attr("data-limit"),10)),void 0==e.attr("data-range")||Nt(e.attr("data-range"))||(n=e.attr("data-range").split(","),2==n.length&&(s=n[0],d=n[1])),Ja=e,n=hap_source_path+"includes/database.php",l=[],o={db_name:i,db_table:e.attr("data-table"),db_type:a,limit:o,range_from:s,range_to:d},t.ajax({type:"POST",url:n,data:o}).done(function(n){if(-1<n.indexOf("Database information missing!")||-1<n.indexOf("Db connection failed")||-1<n.indexOf("Db selection failed")||-1<n.indexOf("Db query failed"))fa&&(alert(n),alert("Playlist process failed, database query: "+i)),Ja&&Ja.remove(),Ci.shift();else{Ci.shift(),n=t.parseJSON(n);var o,s=0,d=n.length;for(s;d>s;s++){if(o=n[s],"database_data"==a){if(!(o.type&&o.mp3||o.path))continue;r=Ut(o)}else{if(!o.path)continue;r=Ht(o.path)}Ja?Ja.after(t(r)):0<ri.children().size()?t(r).prependTo(ri):t(r).appendTo(ri),Ja=t(r),l.push(t(r))}for(s=0,d=l.length,l.reverse(),s;d>s;s++)Ci.unshift(l[s]);l=null,e.remove()}V()}).fail(function(t,e,a){fa&&alert("Playlist process failed, database query: "+i),Ja&&Ja.remove(),Ci.shift(),V()})}else"youtube_single"==a||"youtube_single_list"==a||"youtube_playlist"==a?(Ja=e.data("toremove","true"),Ue.setData({type:a,path:i})):"ofm_single"==a?(Ja=e.data("toremove","true"),Ji=[],Ji.push({id:i,type:a}),$()):"ofm_playlist"==a||"ofm_project"==a?(Ja=e.data("toremove","true"),Bi=a,qi=i,Ji=[],Ui=1,J()):(fa&&alert("Invalid playlist data-type attribute!"),Ci.shift(),V())}function Y(){if(Mi.length){var e,a,i,n,o=0,r=Mi.length;for(o;r>o;o++)i=Mi[o],e=t('<li class="playlistItem" data-type="'+i.type+'"data-mp3="'+i.mp3+'" data-ogg="'+i.ogg+'" data-thumb="'+i.thumb+'"></li>'),n=i.mp3,/\.(mp3)$/i.test(i.mp3)||(n+=".mp3"),Ra&&e.addClass($a),i.url&&e.attr("data-plink",i.url),i.dlink&&(1!=i.dlink&&"true"!=i.dlink?e.attr("data-dlink",i.dlink):e.attr("data-dlink",n)),i.download&&(1!=i.download&&"true"!=i.download?e.attr("data-download",i.download):e.attr("data-download",n)),i.title&&e.attr("data-title",i.title),i.thumb&&("//"==i.thumb.substr(0,2)&&(i.thumb="http:"+i.thumb),e.attr("data-thumb",i.thumb)),i.length&&e.attr("data-length",i.length),"title"==va?a=t('<a class="playlistNonSelected" href="#">'+i.title+"</a>").appendTo(e):"thumb"==va?a=t('<a class="playlistNonSelected" href="#"><img src="'+i.thumb+'" alt="thumb"/></a>').appendTo(e):"all"==va&&(a=t('<a class="playlistNonSelected" href="#"></a>').appendTo(e),t('<span class="hap_thumb"><img src="'+i.thumb+'" alt="thumb"/></span>').appendTo(a),t('<span class="hap_title"><p>'+i.title+"</p></span>").appendTo(a)),qa&&a.after(qa),Ja?(Ja.after(e),"true"==Ja.data("toremove")&&Ja.remove()):e.appendTo(ri),Ja=e}Ci.shift(),V()}function j(){if(Ca||Ea){var e=0;Ja=null;var a;Ii.find("li[class*='playlistItem']").each(function(){a=t(this),Ja?Ja.after(a):Sa?a.appendTo(ri):ri.children().eq(Ma).before(a),Ja=a,e++}),Ii.empty()}if(F(),Oe.css("opacity",1),Qt||B(),Ja=null,li=!1,kt(),Pi>0){if(Ca||Ea){var i=Zi.getCounter();Zi.setPlaylistItems(Pi,!1),i>=Ma&&(Sa||Zi.reSetCounter(i+e)),Da&&(Da=!1,E())}else Zi.setPlaylistItems(Pi),E();aa&&Et()}Ea=Ca=!1,0==Pi&&"undefined"!=typeof playlistEmpty&&playlistEmpty(Xt,He),"undefined"!=typeof audioPlayerPlaylistLoaded&&audioPlayerPlaylistLoaded(Xt,He),oi=!0}function F(){if(_i=[],bi=[],vi=[],0==ri.length)return fa&&alert("lastPlaylist html element seems to be missing! You could be trying to use addTrack method without having necessary html elements inside componentWrapper. Quitting."),!1;var e,a,i,n,o,r,l,s,d,u,f,p,c=0,h=ri.find("li"),y=h.length;for(Ka=0,c;y>c;c++)a=t(h[c]).addClass(Wa),bi.push(a),Ga&&a.addClass(ni),Ka="horizontal"==ca?Ka+a.outerWidth(!0):Ka+a.outerHeight(!0),e=a.find("a[class=playlistNonSelected]"),0==e.length&&(e=a.find("a[class=playlistSelected]")),e.off().on("click",T).attr("data-id",c),vi.push(e),ka&&!isMobile&&e.on("mouseenter",function(e){if(!Qt||li)return!1;e||(e=window.event),e.cancelBubble?e.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),e=t(e.currentTarget).attr("data-id");var a=t(vi[e]),i=!1;return Zi.getCounter()==e&&(i=!0),"undefined"!=typeof playlistItemRollover&&playlistItemRollover(Xt,He,a,e,i),!1}).on("mouseleave",function(e){if(!Qt||li)return!1;e||(e=window.event),e.cancelBubble?e.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),e=t(e.currentTarget).attr("data-id");var a=t(vi[e]),i=!1;return Zi.getCounter()==e&&(i=!0),"undefined"!=typeof playlistItemRollout&&playlistItemRollout(Xt,He,a,e,i),!1}),i="",void 0!=a.attr("data-title")?i=a.attr("data-title"):"title"==va?i=e.html():"thumb"!=va&&"all"==va&&(i=e.find("span[class=hap_title]").find("p").html()),sa&&(n=Rt(c)+da+i,e.html(n)),a=t(bi[c]).attr({"data-id":c,"data-title":i}),o=n=s=l="",r=void 0,p=f=u=d=null,void 0!=a.attr("data-mp3")&&(l=a.attr("data-mp3")),void 0!=a.attr("data-ogg")&&(s=a.attr("data-ogg")),void 0!=a.attr("data-type")&&(n=a.attr("data-type")),void 0!=a.attr("data-origtype")&&(o=a.attr("data-origtype")),void 0==a.attr("data-length")||Nt(a.attr("data-length"))||(r=a.attr("data-length")),"youtube"==n?(void 0==a.attr("data-download")||Nt(a.attr("data-download"))||(d=a.attr("data-download")),void 0==a.attr("data-dlink")||Nt(a.attr("data-dlink"))||(u=a.attr("data-dlink"))):(void 0!=a.attr("data-download")&&(d=Nt(a.attr("data-download"))||"true"==a.attr("data-download")?l:a.attr("data-download")),void 0!=a.attr("data-dlink")&&(u=Nt(a.attr("data-dlink"))||"true"==a.attr("data-dlink")?l:a.attr("data-dlink"))),void 0==a.attr("data-plink")||Nt(a.attr("data-plink"))||(f=a.attr("data-plink")),void 0==a.attr("data-thumb")||Nt(a.attr("data-thumb"))||(p=a.attr("data-thumb")),Xa||(f&&0==a.find("a[class=plink]").length&&(f=t('<a class="plink" href="'+f+'" target="_blank"><img src="'+Ie+'" alt="purchase"/></a>'),e.after(f)),u&&0==a.find("a[class=dlink]").length&&(u=t('<a class="dlink" href="#" data-dlink="'+u+'"><img src="'+Te+'" alt="download"/></a>'),e.after(u),Nt(a.attr("data-dlink"))),ma&&0==a.find("a[class=premove]").length&&(a=t('<a class="premove" href="#"><img src="'+Ae+'" alt="remove"/></a>'),e.after(a))),_i.push({id:c,type:n,origtype:o,title:i,mp3:l,ogg:s,length:r,download:d,thumb:p});return h=null,Pi=_i.length,Xa||(q(),ha&&Re.length&&!ri.hasClass("ui-sortable")&&(ri.on("sortstart",function(t,e){e.helper.css("margin-top",Gt.scrollTop())}),ri.on("sortbeforestop",function(t,e){e.helper.css("margin-top",0)}),ri.sortable({cursor:"move",update:function(t,e){F(),Pi>0&&Zi.setPlaylistItems(Pi);var a=Oe.find("a[class=playlistSelected]").attr("data-id");a&&(Zi.reSetCounter(a),aa&&Et()),1==Pi&&E()},receive:function(t,e){"undefined"!=typeof dropReceive&&dropReceive(Xt,He)}})),pa&&("horizontal"==ca&&Oe.width(Ka),k(!0))),!0}function B(){Qt=!0,li=!1,kt(),setTimeout(function(){Pt(),"horizontal"==un?(mn=_n.width(),gn.css("width",sn*mn+"px")):(mn=_n.height(),gn.css("height",sn*mn+"px")),r()},100),"undefined"!=typeof audioPlayerSetupDone&&audioPlayerSetupDone(Xt,He)}function q(){var e=tn?en:"click";Me.find("a[class=dlink]").off().on(e,function(e){if(e.preventDefault(),Na)return!1;var a=t(this),i=a.closest(".playlistItem"),n=i.attr("data-id");return i.hasClass(ni)?!1:void 0==i.attr("data-type")||Nt(i.attr("data-type"))?(fa&&alert("Invalid data-type for file download function! Quitting."),Na=!1):(e=i.attr("data-type"),void 0==i.attr("data-origtype")||Nt(i.attr("data-origtype"))||(e=i.attr("data-origtype")),void(void 0==a.attr("data-dlink")||Nt(a.attr("data-dlink"))||(a=a.attr("data-dlink"),n=Dt(n,!1),e=U(e,n,a),H(e.name,e.path))))}),Me.find("a[class=plink]").off().on("click",function(e){return t(this).closest(".playlistItem").hasClass(ni)?!1:void 0}),ma&&Me.find("a[class=premove]").off().on("click",function(e){e.preventDefault(),e=t(this).closest(".playlistItem");var a=parseInt(e.attr("data-id"),10);return e.hasClass(ni)?!1:void Xt.removeTrack(a)})}function U(t,e,a){return"local"==t||"folder"==t?(a.indexOf("\\")&&(a=a.replace(/\\/g,"/")),a.match(/^http([s]?):\/\/.*/)||(t=window.location.href,t=t.substr(0,t.lastIndexOf("/")+1),/^\.\.\//i.test(a)&&(a=a.substr(3),"/"==t.charAt(t.length-1)&&(t=t.substr(0,t.lastIndexOf("/"))),t=t.substr(0,t.lastIndexOf("/")+1)),a=t+a),isMobile||(e=0<a.lastIndexOf("/")?a.substr(a.lastIndexOf("/")+1):a)):"soundcloud"==t&&(a=a.replace(/\/stream\\?/,"/download").replace(/\.mp3/,"")),e=e.replace(/[^A-Z0-9\-\_\.]+/gi,"_"),/\.(mp3)$/i.test(e)||(e+=".mp3"),{name:e,path:a}}function H(t,e){if(isMobile)if(Na=!0,ya)La||(Va=X())&&(La=!0),Va?z(Va,t,e):Na=!1;else{var a=X();a?z(a,t,e):Na=!1}else wi.attr("src",hap_source_path+"dl.php?path="+e+"&name="+t)}function z(e,a,i){t.ajax({type:"POST",url:hap_source_path+"mail.php",data:"mail="+e+"&name="+a+"&path="+i}).done(function(t){Na=!1}).fail(function(t,e,a){fa&&alert("Send email error: "+t.responseText),Q(),Na=!1}),Si.css({marginTop:-Si.height()/2+"px",display:"block"}).stop().animate({opacity:1},{duration:500}),Ai&&clearTimeout(Ai),Ai=setTimeout(Q,xi)}function Q(){Ai&&clearTimeout(Ai),Si.stop().animate({opacity:0},{duration:500,complete:function(){Si.css("display","none")}})}function X(){for(var t=prompt("Please enter your email address where download link will be sent:"),e=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;(!e.test(t)||Nt(t))&&null!=t;)t=prompt("Please enter a valid email address:");return t}function W(){t(".hap_text_link").each(function(){var e=t(this),a=e.attr("href");"undefined"!=typeof a&&!1!==a&&-1<a.toLowerCase().indexOf(".mp3")&&e.prepend('<img class="play_link" src="'+Se+'"/>')}),t(".hap_text_link, .hap_image_link").click(function(e){if(!Qt||li)return!1;e=t(this);var a=e.attr("href");return"undefined"==typeof a||!1===a?!1:za&&za==a?I():(M(),Zi.reSetCounter(),za=a,Ua=e,Qa=!0,Ha&&Ha.attr("src",Se),e.hasClass("hap_text_link")&&(Ha=e.find("img").attr("src",xe)),pi=za,ci=pi.substr(0,pi.lastIndexOf("."))+".ogg",ze=!0,Aa||"undefined"!=typeof dt(Ei)&&dt(Ei).pb_setAutoplay(!0),O(),vt(),Qa=!1)})}function $(){Ji.length?G(Ji.shift()):(0==Mi.length&&Ja&&"true"==Ja.data("toremove")&&Ja.remove(),Mi.length>ta&&(Mi=Mi.slice(0,ta)),Y())}function G(e){var a=e.id,i=e.type;e=yi+"?url="+encodeURIComponent("http://api.official.fm/tracks/"+a+"?fields=streaming,cover&api_version=2"),t.ajax({url:e,dataType:"html",cache:!1}).done(function(t){var e=JSON.parse(t).contents;t={};var a,n;e.track&&e.track.streaming&&e.track.streaming.http&&(e=e.track,t.type=i,t.length=e.duration?e.duration:null,t.mp3=e.streaming.http,t.ogg=e.streaming.http,a=e.artist?e.artist:"Official Fm artist",n=e.title?e.title:"Official Fm track",t.title=a+" - "+n,Oa&&(t.url=Oa),Ya&&(t.dlink=Ya),ja&&(t.download=ja),e.cover.urls.small?t.thumb=e.cover.urls.small:Ba&&(t.thumb=Ba),Mi.push(t)),$()}).fail(function(t,e,i){fa&&alert("Playlist process failed, ofm: "+a),$()})}function K(){Hi>1?(Ui+=1,Hi>=Ui&&Ji.length<ta?J():Ji.length?$():(Ci.shift(),V())):Ji.length?$():(0==Mi.length&&Ja&&"true"==Ja.data("toremove")&&Ja.remove(),Ci.shift(),V())}function J(){var e=yi+"?url="+encodeURIComponent("ofm_playlist"==Bi?"http://api.official.fm/playlists/"+qi+"/tracks?api_version=2&page="+Ui:"http://api.official.fm/projects/"+qi+"/tracks?fields=cover&api_version=2&page="+Ui);t.ajax({url:e,dataType:"html",cache:!1}).done(function(t){if(t=JSON.parse(t).contents,Hi=t.total_pages,t.tracks&&t.tracks.length){var e,a=0,i=t.tracks.length;for(i>ta&&(i=ta),a;i>a;a++)e=t.tracks[a].track,e.url&&(e=e.url.substr(e.url.lastIndexOf("/")+1),e=e.substr(0,e.indexOf("?")),Ji.push({id:e,type:Bi}))}K()}).fail(function(t,e,a){fa&&alert("Playlist process failed, ofm: "+qi),K()})}function Z(){Qi?isMobile?Gi?Ni.initVideo(pi):(Qt=!1,Ki=!0,tt("on")):Ni.initVideo(pi):(Yi=0==Me.find("div[class='youtubeIframeMain']").length?t("<div/>").css({display:"block",left:"-10000px"}).addClass("youtubeIframeMain").appendTo(Me):Me.find("div[class='youtubeIframeMain']"),Ni=t.youtubePlayer({autoPlay:Xe,defaultVolume:sn,mediaPath:pi,youtubeHolder:Yi,youtubeChromeless:!1,isMobile:isMobile,initialAutoplay:Qe,quality:null,protocol:Jt},e),t(Ni).on("ap_YoutubePlayer.YT_READY",function(){Fi||Yi.css("left","-10000px"),$i=!0}),t(Ni).on("ap_YoutubePlayer.START_PLAY",function(){ai&&clearInterval(ai),ai=setInterval(ht,250),Ki&&(Ni.stop(),Ni.initVideo(pi),Ki=!1),!Gi&&isMobile&&(tt("off"),Qt=Gi=!0)}),t(Ni).on("ap_YoutubePlayer.END_PLAY",function(){mt()}),t(Ni).on("ap_YoutubePlayer.STATE_PLAYING",function(){gt()}),t(Ni).on("ap_YoutubePlayer.STATE_PAUSED",function(){!isMobile||"iPhone"!=$t&&"iPod"!=$t?_t():hi&&(hi=!1,At("off"))}),Qi=!0),fi=Wi=!0}function tt(t){"on"==t?(Fi=!0,Yi.css({top:"0px",left:"0px"})):(Yi.css("left","-10000px"),Fi=null)}function et(){var t=Xi.substr(1);embedFlashMain(t),t=Ei.substr(1),embedFlashAudio(t),"undefined"!=typeof dt(Xi)?ji=setInterval(at,100):(fa&&console.log("Problems with flash initialization (startFlashInit)! Flash for youtube not initialized! Sound_id: "+He),it())}function at(){void 0!=dt(Xi).setData&&(ji&&clearInterval(ji),dt(Xi).setData(e),Me.find(".flashMain").css("left","-10000px"),it())}function it(){"undefined"!=typeof dt(Ei)?ji=setInterval(ot,100):(fa&&console.log("Problems with flash initialization (checkFlashSound)! Flash audio backup not initialized! Sound_id: "+He),lt())}function nt(){var t=Ei.substr(1);embedFlashAudio(t);var e=setTimeout(function(){e&&clearTimeout(e),"undefined"!=typeof dt(Ei)?ji=setInterval(rt,100):(fa&&console.log("Problems with flash initialization (checkFlashSound_b)! Flash audio backup not initialized! Sound_id: "+He),bt())},500)}function ot(){void 0!=dt(Ei).setData&&(ji&&clearInterval(ji),dt(Ei).setData(e),Me.find(".flashAudio").css("left","-10000px"),lt())}function rt(){void 0!=dt(Ei).setData&&(ji&&clearInterval(ji),dt(Ei).setData(e),Me.find(".flashAudio").css("left","-10000px"),bt())}function lt(){if(Ce){var e=Di.substr(1);embedFlashCircle(e),"undefined"!=typeof dt(Di)?ji=setInterval(st,100):(fa&&console.log("Problems with flash initialization (checkFlashCircle)! Flash circle backup (canvas support is false) not initialized! Sound_id: "+He),bt())}else t(".circleMain").remove(),bt()}function st(){void 0!=dt(Di).setData&&(ji&&clearInterval(ji),dt(Di).setData(Ln),bt())}function dt(t){return"#"==t.charAt(0)&&(t=t.substr(1)),-1!=navigator.appName.indexOf("Microsoft")?window[t]:document[t]}function ut(e){if(Nt(Ge))return alert("soundcloudApiKey has not been set! Skipping Soundcloud url."),Ci.shift(),V(),!1;/\/favorites$/.test(e)&&(e=e.replace(/\/favorites$/,"/likes"));var a=pt(e,Ge);t.ajax({url:a,dataType:"jsonp",cache:!1}).done(function(a){var i,n;if(a.tracks){for(i=a.tracks.length,i>Ke&&(i=Ke),n=0;i>n;n++)a.tracks[n].streamable&&a.tracks[n].stream_url?Mi.push(ft(a.tracks[n])):(i+=1,i>a.tracks.length&&(i=a.tracks.length));Mi.length>Ke&&(Mi=Mi.slice(0,Ke)),Y()}else if(a.duration)a.permalink_url=e,a.streamable&&a.stream_url&&Mi.push(ft(a)),Mi.length>Ke&&(Mi=Mi.slice(0,Ke)),Y();else if(a.username)/likes/.test(e)?(console.log("DATA.USERNAME.LIKES"),Za=a.uri+"/likes"):/favorites/.test(e)?(console.log("DATA.USERNAME.FAVOURITES"),Za=a.uri+"/favorites"):Za=a.uri+"/tracks",ut(Za);else if(t.isArray(a)){for(i=a.length,i>Ke&&(i=Ke),n=0;i>n;n++)a[n].streamable&&a[n].stream_url?Mi.push(ft(a[n])):(i+=1,i>a.length&&(i=a.length));i==ui?(ti+=ui,Ke>ti?ut(Za):(Mi.length>Ke&&(Mi=Mi.slice(0,Ke)),Y())):(Mi.length>Ke&&(Mi=Mi.slice(0,Ke)),Y())}else a.kind&&"group"==a.kind?(Za=a.uri+"/tracks",ut(Za)):(Ci.shift(),V())}).fail(function(t,a,i){fa&&alert("Playlist process failed, soundcloud: "+e),Ci.shift(),V()})}function ft(t){var e={type:"soundcloud"};return t.duration&&(e.length=t.duration),e.mp3=t.stream_url+(/\?/.test(t.stream_url)?"&":"?")+"consumer_key="+Ge,e.ogg="",e.title=t.title,Oa&&(e.url=Oa),t.downloadable&&t.download_url?(Ya&&(e.dlink=Ya),ja&&(e.download=ja)):(Ya&&1!=Ya&&"true"!=Ya&&(e.dlink=Ya),ja&&1!=ja&&"true"!=ja&&(e.download=ja)),t.artwork_url?e.thumb=t.artwork_url:Ba&&(e.thumb=Ba),e}function pt(t,e){return(/api\./.test(t)?t+"?":"http://api.soundcloud.com/resolve?url="+t+"&")+"format=json&offset="+ti+"&consumer_key="+e+"&callback=?"}function ct(){var t=Mi[xa].mp3+"?rand="+99999999*Math.random();ID3.loadTags(t,function(){var e=ID3.getAllTags(t);if(console.log(e),e.title&&(Mi[xa].title=e.title),e.artist&&(Mi[xa].artist=e.artist),e.album&&(Mi[xa].album=e.album),e=e.picture){var a="",i=0,n=e.data.length;for(i;n>i;i++)a+=String.fromCharCode(e.data[i]);Mi[xa].thumb="data:"+e.format+";base64,"+window.btoa(a)}xa++,xa<Mi.length?ct():Y()},{tags:["title","artist","album","picture"],onError:function(t){}})}function ht(){if(ne){var t=Ni.getCurrentTime(),e=Ni.getDuration();ii=Ni.getVideoBytesLoaded()/Ni.getVideoBytesTotal(),St(t)&&St(e)?(si=!1,Le.html(Mt(t)+oa),Ve.html(Ct(e)),Ce?Ee&&(St(ii)&&v(ii),Gn=t/e,!wn&&hi&&(Mn||_(t/e))):(St(ii)&&Tn.width(ii*Sn),wn||An.width(t/e*Sn))):si=!0}}function yt(){var t=Oi.currentTime,e=Oi.duration;if(void 0!=Oi.buffered&&0!=Oi.buffered.length&&St(e)&&(ii=Oi.buffered.end(0)/e),St(t)&&St(e)&&(Le&&Le.html(Mt(t)+oa),Ve&&Ve.html(Ct(e))),Ce)Ee&&(St(ii)&&v(ii),St(t)&&St(e)&&(Gn=t/e,!wn&&hi&&_(t/e)));else{if(St(ii)){var a=ii*Sn;a>Sn&&(a=Sn),Tn&&Tn.width(a)}St(t)&&St(e)&&!wn&&An&&An.width(t/e*Sn)}}function mt(){"undefined"!=typeof audioPlayerSoundEnd&&audioPlayerSoundEnd(Xt,He,Zi.getCounter()),M(),Zi.advanceHandler(1,!0)}function gt(){di||("undefined"!=typeof audioPlayerSoundStart&&audioPlayerSoundStart(Xt,He,Zi.getCounter()),di=!0),"undefined"!=typeof audioPlayerSoundPlay&&audioPlayerSoundPlay(Xt,He,Zi.getCounter()),Ce&&Ee&&b()}function _t(){"undefined"!=typeof audioPlayerSoundPause&&audioPlayerSoundPause(Xt,He,Zi.getCounter())}function vt(){if("youtube"==ei)ne?(Z(),isMobile&&!Gi&&ze&&(Qt=!1,tt("on"))):("undefined"!=typeof dt(Xi)&&(dt(Xi).pb_play(pi,0,100,100,"youtube",ze),fi=!0),Wi=$i=!0);else if(Aa){if(!Li){var t="",t=We?t+'<audio class="hap_audio_cont" preload="auto">':t+'<audio class="hap_audio_cont" preload="none">';Vi.html(t+"</audio>"),Ri=Vi.find(".hap_audio_cont"),Oi=Ri[0],Oi.volume=sn,Li=!0}te?Oi.src=pi:ee&&(Oi.src=ci),ze&&(Oi.load(),Oi.play()),Ri.on("ended",function(t){mt()}).on("pause",function(t){_t()}).on("play",function(t){ai&&clearInterval(ai),ai=setInterval(yt,250),gt()}).on("canplay",function(t){kn&&(Oi.seekable&&0<Oi.seekable.length&&(Oi.currentTime=kn*Oi.duration),kn=null)}).on("canplaythrough",function(t){}).on("loadedmetadata",function(t){}).on("error",function(t){}).on("abort",function(t){}).on("stalled",function(t){}).on("suspend",function(t){}),ai&&clearInterval(ai),ai=setInterval(yt,250)}else"undefined"!=typeof dt(Ei)&&dt(Ei).pb_initAudio(pi);ze?(hi=!0,xt("off")):(hi=!1,At("off")),r(),"youtube"!=ei&&(fi=!0),!isMobile&&ze&&Ni&&Ni.setAutoPlay(!0),ze=!0}function bt(){var e,a=[Me.find(".controls_next"),Me.find(".controls_prev"),Me.find(".controls_toggle"),Me.find(".player_volume"),Me.find(".player_download"),Me.find(".player_loop"),Me.find(".player_shuffle")],i=a.length,n=0;for(n;i>n;n++)e=t(a[n]).css("cursor","pointer").on(en,A),Pa&&!isMobile&&e.on("mouseover",x).on("mouseout",S);W(),ua?L(ua):Qt||B()}function Pt(){if(!Ce&&(Sn=In.width(),St(ii)&&Tn&&Tn.width(ii*Sn),!wn&&An)){var t,e;if("youtube"!=ei){if(Aa)Oi&&(t=Oi.currentTime,e=Oi.duration);else if("undefined"!=typeof dt(Ei))try{t=dt(Ei).pb_getFlashPosition,e=dt(Ei).pb_getFlashDuration()}catch(a){}try{t&&St(t)&&e&&St(e)&&An.width(t/e*Sn)}catch(i){}}}pa&&!Xa&&k(),ea&&zi&&zi.checkSize()}function kt(){Fe.css("display","none")}function wt(){Fe.css("display","block")}function It(){ai&&clearInterval(ai),ea&&zi&&zi.deactivate(),Ye.html(la),Le.html(Ia+oa),Ve.html(Ta),Ce?Ee&&(Gn=0,Fn.clearRect(0,0,Hn,zn),Bn.clearRect(0,0,Hn,zn)):(An.width(0),Tn.width(0)),At("off"),Be.css("display","none")}function Tt(){ai&&clearInterval(ai),aa||(ea&&zi&&zi.deactivate(),Ye.html(la)),Le.html(Ia+oa),Ve.html(Ta),Ce?Ee&&(Gn=0,Fn.clearRect(0,0,Hn,zn),Bn.clearRect(0,0,Hn,zn)):(An.width(0),Tn.width(0)),At("off"),Be.css("display","none")}function At(t){"on"==t?Me.find(".controls_toggle").find("img").attr("src",fe):Me.find(".controls_toggle").find("img").attr("src",ue),Ha&&Ha.hasClass("play_link")&&Ha.attr("src",Se),Ce&&(Ee?(Fn.clearRect(0,0,Hn,zn),_(Gn),b()):"undefined"!=typeof dt(Di)&&dt(Di).pb_toggle_icon("play"))}function xt(t){"on"==t?Me.find(".controls_toggle").find("img").attr("src",ce):Me.find(".controls_toggle").find("img").attr("src",pe),Ha&&Ha.hasClass("play_link")&&Ua.hasClass("hap_text_link")&&Ha.attr("src",xe),Ce&&(Ee?(Fn.clearRect(0,0,Hn,zn),_(Gn),b()):"undefined"!=typeof dt(Di)&&dt(Di).pb_toggle_icon("pause"))}function St(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Mt(t){return t=Math.round(t),minutes=Math.floor(t/60),minutes=10<=minutes?minutes:"0"+minutes,t=Math.floor(t%60),minutes+":"+(t>=10?t:"0"+t)}function Ct(t){return t=Math.round(t),minutes=Math.floor(t/60),minutes=10<=minutes?minutes:"0"+minutes,t=Math.floor(t%60),minutes+":"+(t>=10?t:"0"+t)}function Et(t){if("string"==typeof t){if(sa&&Zi&&-1!=Zi.getCounter()){var e=Zi.getCounter();t=Rt(_i[e].id)+da+t}}else{if("number"==typeof t){if(!Zi||0>t||t>Pi-1)return!1}else if(!Zi)return!1;e=Zi.getCounter(),t=Dt(e)}ea&&zi?(zi.input(t),zi.activate()):Ye&&Ye.html(t)}function Dt(t,e){return("undefined"==typeof e||null===e)&&(e=!0),_i[t]&&_i[t].title&&!Nt(_i[t].title)?e&&sa?Rt(_i[t].id)+da+_i[t].title:_i[t].title:la}function Rt(t){return 9>t?"0"+(t+1):t+1}function Ot(t){var e=[],a=[],i=0;for(i;t>i;i++)e[i]=i;var n,i=0;for(i;t>i;i++)n=Math.round(Math.random()*(e.length-1)),a[i]=e[n],e.splice(n,1);return a}function Lt(t){var e=[],a=0;for(a;t>a;a++)e[a]=a;return e}function Vt(t,e,a){"title"==e?t.sort(function(t,e){return t.title==e.title?0:t.title<e.title?-1:1}):"type"==e&&t.sort(function(t,e){return t.type==e.type?0:t.type<e.type?-1:1}),a&&t.reverse()}function Nt(t){return t?0==t.replace(/^\s+|\s+$/g,"").length:!0}function Yt(t){t=t.split(":");for(var e=0,a=1;0<t.length;)e+=a*parseInt(t.pop()),a*=60;return e}function jt(t){if(window.ActiveXObject&&window.GetObject){var e=new ActiveXObject("Microsoft.XMLDOM");return e.loadXML(t),e}if(window.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");throw Error("No XML parser available")}function Ft(t,e){return e-t}function Bt(t){if("string"==typeof t)switch(t.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(t)}else if("boolean"==typeof t)return Boolean(t)}function qt(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}function Ut(e){var a,i,n,o,r,l,s="",d="",u="",f="";return a=e.type.toLowerCase(),e.origtype&&(s=e.origtype.toLowerCase()),e.mp3?i=e.mp3:e.path&&(i=e.path),e.ogg&&(d=e.ogg),e.title&&(u=e.title),e.thumb&&(f=e.thumb),e.download&&("youtube_single"==a||"youtube_single_list"==a||"youtube_playlist"==a?1==e.download||"true"==e.download||Nt(e.download)||(n=e.download):n=1==e.download?i:e.download),e.url&&(r=e.url),e.dlink&&("youtube_single"==a||"youtube_single_list"==a||"youtube_playlist"==a?1==e.dlink||"true"==e.dlink||Nt(e.dlink)||(o=e.dlink):o=1==e.dlink?i:e.dlink),"local"==a?"title"==va?l="<li class= 'playlistItem' data-type='local' data-origtype='"+s+"' data-mp3='"+i+"' data-ogg='"+d+"' data-thumb='"+f+"' data-title='"+u+"'><a class='playlistNonSelected' href='#'>"+u+"</a></li>":"thumb"==va?l="<li class= 'playlistItem' data-type='local' data-origtype='"+s+"' data-mp3='"+i+"' data-ogg='"+d+"' data-thumb='"+f+"' data-title='"+u+"'><a class='playlistNonSelected' href='#'><img src='"+f+"' alt='thumb'/></a></li>":"all"==va&&(l="<li class= 'playlistItem' data-type='local' data-origtype='"+s+"' data-mp3='"+i+"' data-ogg='"+d+"' data-thumb='"+f+"' data-title='"+u+"'><a class='playlistNonSelected' href='#'><span class='hap_thumb'><img src='"+f+"' alt='thumb'/></span><span class='hap_title'><p>'"+u+"'</p></span></a></li>"):(l="<li class= 'playlistItem' data-type='"+a+"' data-path='"+i+"' data-thumb='"+f+"'></li>","database_data"==a&&(i=e.table?e.table:null,s=e.limit?e.limit:null,e=e.range?e.range:null,i&&(i=' data-table="'+i+'" ',d=l.match(/\>/),l=l.slice(0,d.index)+i+l.slice(d.index)),s&&(i=' data-limit="'+s+'" ',d=l.match(/\>/),l=l.slice(0,d.index)+i+l.slice(d.index)),e&&(i=' data-range="'+e+'" ',d=l.match(/\>/),l=l.slice(0,d.index)+i+l.slice(d.index)))),n&&(i=' data-download="'+n+'" ',d=l.match(/\>/),l=l.slice(0,d.index)+i+l.slice(d.index)),"local"==a?(o&&(i="<a class='dlink' href='#' data-dlink='"+o+"'><img src='"+Te+"' alt='download'/></a>",d=l.match(/\<\/a\>\<\/li\>/),l=l.slice(0,d.index)+i+l.slice(d.index)),r&&(i="<a class='plink' href='"+r+"' target='_blank'><img src='"+Ie+"' alt='purchase'/></a>",d=l.match(/\<\/a\>\<\/li\>/),l=l.slice(0,d.index)+i+l.slice(d.index))):(o&&(i=' data-dlink="'+o+'" ',d=l.match(/\>/),l=l.slice(0,d.index)+i+l.slice(d.index)),r&&(i=' data-plink="'+r+'" ',d=l.match(/\>/),l=l.slice(0,d.index)+i+l.slice(d.index))),a=document.createElement("ul"),a.innerHTML=l,t(a.firstChild)}function Ht(e){e=t(e);var a;return e=t("<div>").append(e.clone()).html(),a=document.createElement("ul"),a.innerHTML=e,t(a.firstChild)}function zt(t){if(Pi=_i.length,Pi>0){F();var e=Zi.getCounter();t==e?(D(),Zi.setPlaylistItems(Pi)):(Zi.setPlaylistItems(Pi,!1),e>t&&Zi.reSetCounter(Zi.getCounter()-1)),aa&&Et()}else R(),ua=null,"undefined"!=typeof playlistEmpty&&playlistEmpty(Xt,He)}var Qt=!1,Xt=this;t("body");var Wt,$t,Gt=t(window),Kt=t(document),Jt=t.inArray(window.location.protocol,["http:","https:"])?"http:":window.location.protocol,Zt=navigator.userAgent;(-1<Zt.indexOf("iPhone")||-1<Zt.indexOf("iPod")||-1<Zt.indexOf("iPad"))&&(-1<Zt.indexOf("iPhone")?$t="iPhone":-1<Zt.indexOf("iPod")?$t="iPod":-1<Zt.indexOf("iPad")&&($t="iPad"));var te,ee,ae=-1<navigator.userAgent.toLowerCase().indexOf("safari/"),ie=document.createElement("audio"),ne=!1;ie.canPlayType?(ne=!0,te=!!ie.canPlayType&&""!=ie.canPlayType("audio/mpeg"),ee=!!ie.canPlayType&&""!=ie.canPlayType('audio/ogg; codecs="vorbis"')):(te=!0,ee=!1);var oe="https://infiniteearthmember.com/wp-content/themes/dynamik-gen/",re=oe+e.buttonsUrl.prev,le=oe+e.buttonsUrl.prevOn,se=oe+e.buttonsUrl.next,de=oe+e.buttonsUrl.nextOn,ue=oe+e.buttonsUrl.play,fe=oe+e.buttonsUrl.playOn,pe=oe+e.buttonsUrl.pause,ce=oe+e.buttonsUrl.pauseOn,he=oe+e.buttonsUrl.loop,ye=oe+e.buttonsUrl.loopOn,me=oe+e.buttonsUrl.volume,ge=oe+e.buttonsUrl.volumeOn,_e=oe+e.buttonsUrl.mute,ve=oe+e.buttonsUrl.muteOn,be=oe+e.buttonsUrl.shuffle,Pe=oe+e.buttonsUrl.shuffleOn,ke=oe+e.buttonsUrl.download,we=oe+e.buttonsUrl.downloadOn,Ie=oe+e.buttonsUrl.trackUrlIcon,Te=oe+e.buttonsUrl.trackDownloadIcon,Ae=oe+e.buttonsUrl.trackRemoveIcon,xe=oe+e.buttonsUrl.link_pause,Se=oe+e.buttonsUrl.link_play,Me=t(this).css("display","block"),Ce=Me.hasClass("hap_circle"),Ee=!1;ne&&qt()&&(Ee=!0);var De="html5audio-popup"==Me.attr("id"),Re=Me.find(".playlistHolder"),Oe=Me.find(".playlist_inner").css("opacity",0);Me.find(".playerHolder"),Me.find(".player_mediaTime");var Le=Me.find(".player_mediaTime_current"),Ve=Me.find(".player_mediaTime_total"),Ne=Me.find(".player_mediaName_Mask"),Ye=Me.find(".player_mediaName");Me.find(".player_controls");var je=Me.find(".player_volume"),Fe=Me.find(".preloader"),Be=Me.find(".player_download");Me.find(".componentPlaylist");var qe=t(e.playlistList);De&&window.opener&&(qe=window.opener.jQuery(e.playlistList));var Ue=new APHAPYTLoader(e);t(Ue).on("APHAPYTLoader.END_LOAD",function(t,e){var a,i,n=e.length;for(a=0;n>a;a++)i=e[a],i.description=i.description?i.description.replace(/["']/g,""):null,Oa&&(i.url=Oa),Ya&&(i.dlink=Ya),ja&&(i.download=ja),Mi.push(i);Mi.length>Ze&&(Mi=Mi.slice(0,Ze)),Y()});var He=e.sound_id,ze=e.autoPlay,Qe=e.autoPlay,Xe=e.autoPlay,We=e.autoLoad;isMobile&&(ze=!1,Xe=e.autoPlay=!1);var $e=e.useOnlyMp3Format,Ge=e.soundcloudApiKey,Ke=e.soundcloud_result_limit,Je=e.podcast_result_limit,Ze=e.yt_playlist_result_limit,ta=e.ofm_result_limit,ea=e.useSongNameScroll,aa=e.autoSetSongTitle,ia=e.loopingOn,na=e.randomPlay,oa=e.mediaTimeSeparator,ra=e.seekTooltipSeparator,la=e.defaultArtistData,sa=e.useNumbersInPlaylist,da=e.titleSeparator,ua=e.activePlaylist,fa=e.useAlertMessaging,pa=e.activatePlaylistScroll,ca=e.playlistScrollOrientation.toLowerCase(),ha=e.sortablePlaylistItems,ya=e.autoReuseMailForDownload,ma=e.useRemoveBtnInTracks,ga=e.useVolumeTooltip,_a=e.useSeekbarTooltip,va=e.playlistItemContent.toLowerCase(),ba=e.useKeyboardNavigation,Pa=e.useBtnRollovers,ka=e.usePlaylistRollovers,wa=e.getTrackInfoFromID3;Le.html("0:00"),Ve.html("0:00");var Ia=Le.html(),Ta=Ve.html();Ye.html(la),Le.html(Ia+oa),Ve.html(Ta);var Aa=!0;(!ne||!te&&$e)&&(Aa=!1);var xa,Sa,Ma,Ca,Ea,Da,Ra,Oa,La,Va,Na,Ya,ja,Fa,Ba,qa,Ua,Ha,za,Qa,Xa=!1,Wa="hap_processed",$a="hap_draggable",Ga=!1;void 0!=Re.attr("data-playlistLocked")&&(Ga=!0);var Ka,Ja,Za,ti,ei,ai,ii,ni="playlist_locked",oi=!1,ri=null,li=!0,si=!1,di=!1,ui=50,fi=!1,pi="",ci="",hi=!1,yi=hap_source_path+"includes/ba-simple-proxy.php";ia&&Me.find(".player_loop").find("img").attr("src",ye),na&&Me.find(".player_shuffle").find("img").attr("src",Pe);var mi,gi,_i=[],vi=[],bi=[],Pi=0,ki=t('<div class="hap_feedParser"/>'),wi=0==Me.find("iframe[id='dl_iframe']").length?t('<iframe id="dl_iframe"/>').css({position:"absolute",left:"-10000px",display:"none"}).appendTo(Me):Me.find("iframe[id='dl_iframe']"),Ii=t("<div/>"),Ti=t("<div/>");if(isMobile)var Ai,xi=1e3,Si=0==Re.find("div[id='download_confirm']").length?t('<div id="download_confirm"><p>DOWNLOAD STARTING</p></DIV>').css({opacity:0,zIndex:1e3}).appendTo(Re):Re.find("div[id='download_confirm']");var Mi=[],Ci=[],Ei=e.flashAudio,Di=e.circleMain;if(Aa)var Ri,Oi,Li=!1,Vi=t('<div class="hap_audioHolder"/>');var Ni,Yi,ji,Fi,Bi,qi,Ui,Hi,zi,Qi=!1,Xi=e.flashYoutube,Wi=!1,$i=!1,Gi=!1,Ki=!1,Ji=[];ea&&a();var Zi=t.playlistManager({randomPlay:na,loopingOn:ia});t(Zi).on("ap_PlaylistManager.COUNTER_READY",function(){var t=Zi.getCounter(),e=_i[t];e&&!Ga&&(C(),aa&&Et(),ei=e.origtype?e.origtype:e.type,pi=e.mp3,ci=e.ogg,Fa=e.download?!0:null,O(),vt(),"undefined"!=typeof itemTriggered&&itemTriggered(Xt,He,t))}),t(Zi).on("ap_PlaylistManager.PLAYLIST_END",function(){C(),"undefined"!=typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(Xt,He),hi=!1,At("off")}),t(Zi).on("ap_PlaylistManager.PLAYLIST_END_ALERT",function(){"undefined"!=typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(Xt,He)});var tn,en="",an="",nn="";"ontouchstart"in window?(tn=!0,en="touchstart.ap",an="touchmove.ap",nn="touchend.ap"):(tn=!1,en="mousedown.ap",an="mousemove.ap",nn="mouseup.ap");var on,rn=!1,ln=!1,sn=e.defaultVolume;0>sn&&(sn=0),0==sn?on=.5:sn>1&&(sn=1);var dn=Me.find(".volume_seekbar").css("cursor","pointer").on(en,function(t){return i(t),ln=!1}),un="horizontal";if(void 0!=dn.attr("data-orientation")&&(un=dn.attr("data-orientation").toLowerCase()),void 0!=dn.attr("data-autoHide")){var fn,pn=function(){fn&&clearTimeout(fn),dn.css("display","none"),cn=!1},rn=!0,cn=!1,hn=parseInt(dn.attr("data-autoHide"),10);isMobile||je.on("mouseover",function(){return Qt?(fn&&clearTimeout(fn),dn.css("display","block"),cn=!0,!1):!1}).on("mouseout",function(){return Qt?(fn&&clearTimeout(fn),fn=setTimeout(pn,hn),!1):!1})}var yn=!1,mn=0,gn=Me.find(".volume_level"),_n=Me.find(".volume_bg");if(ga&&!isMobile){dn.on("mouseover",l);var vn=Me.find(".player_volume_tooltip"),bn=parseInt(vn.css("top"),10);vn.on("mouseenter",function(){dn.off("mouseover",l),vn.css("display","none")}).on("mouseleave",function(){dn.on("mouseover",l)})}else Me.find(".player_volume_tooltip").remove();var Pn,kn,wn=!1,In=Me.find(".progress_bg"),Tn=Me.find(".load_progress"),An=Me.find(".play_progress"),xn=Me.find(".player_progress"),Sn=In.width(),Mn=!1;if(Ce){var Cn=Me.find(".load_canvas").css("cursor","pointer"),En=Me.find(".play_canvas"),Dn=Me.find(".circlePlayer"),Rn=parseFloat(Dn.attr("data-offOpacity"),10),On=parseFloat(Dn.attr("data-onOpacity"),10);isMobile&&(Rn=On=1);var Ln={flash_id:e.flash_id,strokeSize:parseInt(Dn.attr("data-strokeSize"),10),play_color:En.attr("data-bgcolor"),load_color:Cn.attr("data-bgcolor"),tolerance:parseInt(Dn.attr("data-tolerance"),10),offOpacity:Rn,onOpacity:On,circleWidth:Cn.width(),circleHeight:Cn.height()};if(Ee){var Vn,Nn=Ln.strokeSize,Yn=Ln.play_color,jn=Ln.load_color,Fn=Cn[0].getContext("2d"),Bn=En[0].getContext("2d"),qn=2*Math.PI,Un=Math.PI/2,Hn=Ln.circleWidth,zn=Ln.circleHeight,Qn=Hn/2,Xn=Qn-Nn,Wn=e.tolerance,$n=!1,Gn=0;Cn.on(en,function(t){return $n=P(t)?!1:!0,u(t),!1}),xn=Cn}else Cn.remove(),En.remove()}else xn=Me.find(".player_progress").css("cursor","pointer").on(en,function(t){return u(t),!1});if(_a&&!isMobile){xn.on("mouseover",h);var Kn=Me.find(".player_progress_tooltip").css("zIndex",50);console.log(ra),Kn.find("p").html("0:00"+ra+"0:00"),Kn.on("mouseenter",function(){xn.off("mouseover",h),Kn.css("display","none")}).on("mouseleave",function(){xn.on("mouseover",h)})}else Me.find(".player_progress_tooltip").remove();return this.flashVideoPause=function(){At("off"),hi=!1,_t()},this.flashVideoResume=function(){xt("off"),hi=!0,gt()},this.flashVideoEnd=function(){mt()},this.flashVideoStart=function(){xt("off"),fi=hi=!0,gt()},this.flashYoutubeData=function(t,e,a,i){Ce?(St(t)&&St(e)&&"undefined"!=typeof dt(Di)&&dt(Di).pb_drawLoadbar(t/e),St(a)&&St(i)&&(Gn=a/i,wn||"undefined"!=typeof dt(Di)&&dt(Di).pb_drawSeekbar(a/i))):(St(t)&&St(e)&&Tn&&Tn.width(t/e*Sn),St(a)&&St(i)&&An&&An.width(a/i*Sn)),St(a)&&St(i)&&(Le&&Le.html(Mt(a)+oa),Ve&&Ve.html(Ct(i)))},this.flashAudioData=function(t,e,a,i){t/=e,Ce?Ee?(St(t)&&v(t),St(a)&&St(i)&&(Gn=a/i,!wn&&hi&&_(a/i))):(null!==t&&"undefined"!=typeof dt(Di)&&dt(Di).pb_drawLoadbar(t),St(a)&&St(i)&&(Gn=a/i,wn||"undefined"!=typeof dt(Di)&&dt(Di).pb_drawSeekbar(a/i))):(!wn&&An&&An.width(a/i*Sn),null!==t&&(t*=Sn,t>Sn&&(t=Sn),Tn&&Tn.width(t)),St(a)&&St(i)&&(Le&&Le.html(Mt(a)+oa),Ve&&Ve.html(Ct(i))))},this.flashAudioEnd=function(){mt()},this.flashCircleToggle=function(t){I()},this.flashCircleOverLoader=function(t){Kn.css("display","block"),g(t)},this.flashCircleOutLoader=function(){Kn.css("display","none")},this.flashCircleSeek=function(t){c(t)},this.embedFlash=function(){if(ne)e.useOnlyMp3Format&&!te&&(t=Ei.substr(1),embedFlashAudio(t));else{var t=Xi.substr(1);embedFlashMain(t),t=Ei.substr(1),embedFlashAudio(t),Ce&&(t=Di.substr(1),embedFlashCircle(t))}},ba&&Kt.keyup(function(t){return!Qt||li?!1:(t||(t=window.event),t.cancelBubble?t.cancelBubble=!0:t.stopPropagation&&t.stopPropagation(),t=t.keyCode,37==t?Xt.previousAudio():39==t?Xt.nextAudio():32==t?Xt.toggleAudio():77==t&&(o(),r()),!1)}),Gt.resize(function(){return!Qt||li?!1:(Wt&&clearTimeout(Wt),void(Wt=setTimeout(Pt,150)))}),this.setPlayIcon=function(){Ha&&Ha.hasClass("play_link")&&Ha.attr("src",Se),hi=!1},this.playAudio=function(){if(!Qt||li||!ri||hi||!fi)return!1;if("youtube"==ei){if(!$i)return!1;ne?Ni.togglePlayback():"undefined"!=typeof dt(Xi)&&dt(Xi).pb_togglePlayback()}else Aa?Oi&&Oi.play():"undefined"!=typeof dt(Ei)&&dt(Ei).pb_play();xt("off"),fi=hi=!0},this.pauseAudio=function(){if(!Qt||li||!ri||!hi||!fi)return!1;if("youtube"==ei){if(!$i)return!1;ne?Ni.togglePlayback():"undefined"!=typeof dt(Xi)&&dt(Xi).pb_togglePlayback()}else Aa?Oi&&Oi.pause():"undefined"!=typeof dt(Ei)&&dt(Ei).pb_pause();At("off"),hi=!1},this.toggleAudio=function(){return Qt&&!li&&ri&&fi?void I():!1},this.stopAudio=function(){if(!Qt||li||!ri||!fi)return!1;if("youtube"==ei){if(!$i)return!1;ne?Ni.stop():"undefined"!=typeof dt(Xi)&&dt(Xi).pb_dispose()}else Aa?Oi&&(Oi.src="",te?Oi.src=pi:ee&&(Oi.src=ci)):"undefined"!=typeof dt(Ei)&&dt(Ei).pb_dispose();Tt(),hi=!1},this.checkAudio=function(t){if(!Qt||li||!ri)return!1;if(t=t.toLowerCase(),hi){if("pause"==t)if("youtube"==ei){if(!$i)return!1;ne?Ni.togglePlayback():"undefined"!=typeof dt(Xi)&&dt(Xi).pb_togglePlayback()}else Aa?Oi&&Oi.pause():"undefined"!=typeof dt(Ei)&&dt(Ei).pb_pause();else if("stop"==t){if("youtube"==ei){if(!$i)return!1;Ni.stop()}else Aa?Oi&&(Oi.src="",te?Oi.src=pi:ee&&(Oi.src=ci)):"undefined"!=typeof dt(Ei)&&dt(Ei).pb_dispose();Tt()}hi=!1,At("off")}},this.nextAudio=function(){return Qt&&!li&&ri?(M(),void Zi.advanceHandler(1,!0)):!1},this.previousAudio=function(){return Qt&&!li&&ri?(M(),void Zi.advanceHandler(-1,!0)):!1},this.loadAudio=function(t){if(!Qt||li||!ri)return!1;if("string"==typeof t){var e=0,a=!1;for(e;Pi>e;e++)if(t==_i[e].title){t=e,a=!0;break}if(!a)return fa&&alert('Track with name "'+t+'" doesnt exist. Load audio failed.'),!1}else{if("number"!=typeof t)return fa&&alert("Load audio method requires either a track number or a track title to load. Load audio failed."),!1;if(0>t||t>Pi-1)return fa&&alert('Invalid track number. Track number  "'+t+'" doesnt exist. Load audio failed.'),!1}M(),Zi.processPlaylistRequest(t)},this.loadPlaylist=function(t){return!Qt||li?!1:"undefined"==typeof t?(fa&&alert("loadPlaylist method requires data parameter. loadPlaylist failed."),!1):(ua=t,void L(ua))},this.addTrack=function(e,a,i,n){if(!Qt||li)return!1;if("undefined"==typeof e)return fa&&alert("addTrack method requires type parameter. AddTrack failed."),!1;if("undefined"==typeof a)return fa&&alert("addTrack method requires format parameter. AddTrack failed."),!1;if("undefined"==typeof i)return fa&&alert("addTrack method requires track parameter. AddTrack failed."),!1;var o=1,r=!1;if("string"!=typeof i&&"[object Object]"!==Object.prototype.toString.call(i)){if("[object Array]"!==Object.prototype.toString.call(i))return fa&&alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),!1;o=i.length,r=!0}if(Ma=n,e=e.toLowerCase(),"visible"==e?(ri&&Xa&&R(),Ca=!0,Xa=!1):(ri&&!Xa&&R(),Xa=Ea=!0),Sa=!1,ri)if("undefined"!=typeof Ma){if(0>Ma||Ma>Pi)return fa&&alert('Invalid position to insert track to. Position number "'+n+'" doesnt exist. AddTrack failed.'),!1;Ma==Pi&&(Sa=!0)}else Sa=!0,Ma=Pi;else{if("undefined"!=typeof Ma){if(0!=Ma)return fa&&alert('Invalid position to insert track to. Position number "'+n+'" doesnt exist. AddTrack failed.'),!1}else Ma=0;Sa=!0}wt(),li=!0,oi=!1,n=0;var l;l="playlist"+Math.floor(9999*Math.random());var s=t("<ul id = "+l+"></ul>");for(a=a.toLowerCase(),n;o>n;n++)l=r?i[n]:i,"html"==a?Ht(l).appendTo(s):(l.type&&l.mp3||l.path)&&Ut(l).appendTo(s);Ci=[],Ii.empty(),s.appendTo(Ii).find("li[class='playlistItem']").each(function(){Ci.push(t(this))}),Da=!1,ri||(Da=!0,ri="visible"==e?Oe:Ti),V()},this.inputAudio=function(t){return!Qt||li?!1:"undefined"==typeof t?(fa&&alert("inputAudio method requires data parameter. inputAudio failed."),!1):"undefined"===t.mp3?(fa&&alert("inputAudio method requires data.mp3 parameter. inputAudio failed."),!1):(M(),Zi.reSetCounter(),pi=t.mp3,"undefined"!==t.ogg&&(ci=t.ogg),Et("undefined"!==t.title?t.title:la),isMobile&&(ze=!0,Aa||"undefined"!=typeof dt(Ei)&&dt(Ei).pb_setAutoplay(!0)),O(),void vt())},this.removeTrack=function(t){if(!Qt||li||!ri)return!1;if("undefined"==typeof t)return fa&&alert("removeTrack method requires track parameter. removeTrack failed."),!1;if("string"==typeof t){var e=0,a=!1;for(e;Pi>e;e++)if(t==_i[e].title){t=e,a=!0;break}if(!a)return fa&&alert('Track with name "'+t+'" doesnt exist. RemoveTrack failed.'),!1;bi[t]&&_i[t]?(bi[t].remove(),_i.splice(t,1),zt(t)):fa&&alert('RemoveTrack with name "'+t+'" failed.')}else if("number"==typeof t){if(0>t||t>Pi-1)return fa&&alert('Invalid track number. Track number  "'+t+'" doesnt exist. RemoveTrack failed.'),!1;bi[t]&&_i[t]?(bi[t].remove(),_i.splice(t,1),zt(t)):fa&&alert('RemoveTrack with name "'+t+'" failed.')}else{if("[object Array]"!==Object.prototype.toString.call(t))return fa&&alert("removeTrack method requires track parameter as string, number or array. removeTrack failed."),!1;if("string"==typeof t[0]?e=!0:"number"==typeof t[0]&&(e=!1),e){var i,n,o,e=0,a=t.length;t:for(;a>e;e++)if(n=t[e],"string"==typeof n){if(o=0,i=_i.length,0==i){zt();break t}for(o;i>o;o++)if(n==_i[o].title&&bi[o]&&_i[o]){bi[o].remove(),_i.splice(o,1),zt(o);break}}}else t:for(t.sort(Ft),e=0,a=t.length,e;a>e;e++)if(n=t[e],"number"==typeof n){if(i=_i.length,0==i){zt();break t}n>-1&&i>n&&bi[n]&&_i[n]&&(bi[n].remove(),_i.splice(n,1),zt(n))}}},this.destroyAudio=function(){return Qt&&!li&&ri?void D():!1},this.destroyPlaylist=function(){return Qt&&!li&&ri?void R():!1},this.setTitle=function(t){return Qt&&!li&&ri?void Et(t):!1},this.toggleShuffle=function(){return!Qt||li?!1:(na?(Me.find(".player_shuffle").find("img").attr("src",be),na=!1):(Me.find(".player_shuffle").find("img").attr("src",Pe),na=!0),void Zi.setRandom(na))},this.toggleLoop=function(){return!Qt||li?!1:(ia?(Me.find(".player_loop").find("img").attr("src",he),ia=!1):(Me.find(".player_loop").find("img").attr("src",ye),ia=!0),void Zi.setLooping(ia))},this.setVolume=function(t){return!Qt||li?!1:(0>t?t=0:t>1&&(t=1),sn=t,void r())},this.getVolume=function(){return Qt?sn:!1},this.setAutoPlay=function(t){return Qt?(ze=t,void(Aa||"undefined"!=typeof dt(Ei)&&dt(Ei).pb_setAutoplay(t))):!1},this.getAutoPlay=function(){return Qt?ze:!1},this.getIsMobile=function(){return isMobile},this.getMobileType=function(){return $t},this.getSetupDone=function(){return Qt},this.getPlaylistLoaded=function(){return oi},this.getPlaylistTransition=function(){return li},this.getMediaPlaying=function(){return!Qt||li?!1:hi},this.getAudioInited=function(){return!Qt||li?!1:fi},this.getMediaType=function(){return!Qt||li?!1:ei},this.getActiveItem=function(){return!Qt||li?!1:Zi.getCounter()},this.getPlaylistItems=function(t){return Qt&&!li&&bi&&0!=bi.length?"string"==typeof t?bi:"number"==typeof t?0>num||num>Pi-1||!bi[num]?!1:bi[num]:void 0:!1},this.getMediaCount=function(){return!Qt||li?!1:St(Pi)?Pi:0},this.getPlaylistHidden=function(){return!Qt||li?!1:Xa},this.get_hidden_playlist_holder=function(){return Qt?Ti:!1},this.getPlaylistList=function(){return Qt&&qe&&0!=qe.length?qe:!1},this.orderPlaylist=function(e,a){if(!Qt||!ri)return!1;if("undefined"==typeof e)return fa&&alert("orderPlaylist method requires action parameter. orderPlaylist failed."),!1;var i=ri.children("li"),n=i.length;if(0==n)return!1;var o=e.toLowerCase();if("reverse"==o)ri.append(i.get().reverse());else{if("random"!=o&&"remap"!=o&&"swap"!=o)return fa&&alert("Wrong action parameter for orderPlaylist method. orderPlaylist failed."),!1;if("random"==o)a=Ot(n);else if("remap"==o){if("undefined"==typeof a||a.length!=n)return!1}else{if("swap"!=o)return!1;if("undefined"==typeof a||2!=a.length)return!1;i=Lt(n),i.splice(a[1],1,a[0]),i.splice(a[0],1,a[1]),a=t.extend(!0,[],i)}orderedItems=jQuery.map(a,function(t){return jQuery(bi).get(t)}),ri.empty().html(orderedItems)}F(),(i=Oe.find("a[class=playlistSelected]").attr("data-id"))&&(Zi.reSetCounter(i),aa&&Et())},this.checkScroll=function(){return Qt&&!li&&ri?void k():!1},this.reinitScroll=function(){return Qt&&!li&&ri?(mi&&(mi.reinitialise(),"vertical"==ca?(mi.scrollToY(0),t(".jspPane").css("top","0px")):(mi.scrollToX(0),t(".jspPane").css("left","0px"))),void(ea&&zi&&Zi&&-1!=Zi.getCounter()&&aa&&Et())):!1},this.getPlaylistData=function(){return Qt&&!li&&ri?_i:!1},this.getSoundId=function(){return Qt?He:!1},this.getTouch=function(){return Qt?tn:!1},this.get_hap_source_path=function(){return Qt?hap_source_path:!1},ne?(t(".flashMain").remove(),t(".circleMain").remove(),Aa?(t(".flashAudio").remove(),bt()):nt()):et(),this}}(jQuery),function(t){t.APHAPYTLoader=function(e){function a(){if(h.length){r=h.shift(),o=r.type;var t=r.path;if(m=[],u=0,d=1,f=r.limit?r.limit:200,p=r.order?r.order:"relevance","youtube_single"==o||"youtube_single_list"==o)t="https://www.googleapis.com/youtube/v3/videos?id="+t+"&key="+v+"&part=snippet,contentDetails,statistics,status";else if(-1==$.inArray(p,_)&&(p="relevance"),"youtube_playlist"==o)t="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+t+"&key="+v;else if("youtube_video_query"==o)t="https://www.googleapis.com/youtube/v3/search?part=id,snippet&type=video&maxResults=50&order="+p+"&q="+(r.query||r.path)+"&key="+v;else if("youtube_user_channels"==o)t="https://www.googleapis.com/youtube/v3/channels?part=contentDetails&maxResults=50&forUsername="+t+"&key="+v;else{if("youtube_channel"!=o)return void alert("Wrong youtube type V3!");t="https://www.googleapis.com/youtube/v3/channels?part=snippet,contentDetails&id="+t+"&key="+v}i(t)}else $(c).trigger("APHAPYTLoader.END_LOAD",[y])}function i(t){$.ajax({url:t,dataType:"jsonp"}).done(function(t){t.error&&t.error.message&&alert(t.error.message);var e,c=t.items.length;for(c+u>f&&(c=f-u),e=0;c>e;e++)(_item=t.items[e])&&("youtube_playlist"==o||"youtube_single"==o||"youtube_single_list"==o?("private"!=_item.status.privacyStatus&&y.push(n(_item,o)),u++):"youtube_video_query"==o?(y.push(n(_item,o)),u++):"youtube_user_channels"!=o&&"youtube_channel"!=o||m.push(_item.contentDetails.relatedPlaylists.uploads));if("youtube_single"==o||"youtube_single_list"==o)a();else if("youtube_user_channels"!=o&&"youtube_channel"!=o)if(d+=50,f>d)if(d<=t.pageInfo.totalResults&&t.nextPageToken){if(e=r.path,"youtube_playlist"==o)var h="https://www.googleapis.com/youtube/v3/playlistItems?pageToken="+t.nextPageToken+"&part=snippet,status,contentDetails&maxResults=50&playlistId="+e+"&key="+v;else"youtube_video_query"==o&&(h="https://www.googleapis.com/youtube/v3/search?pageToken="+t.nextPageToken+"&part=id,snippet&maxResults=50&order="+p+"&q="+e+"&key="+v);i(h)}else a();else s&&(g++,g<m.length?(d=0,l=m[g],h="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+l+"&key="+v,i(h)):(s=!1,a())),a();else m.length?(1<m.length&&(s=!0),l=m[g],h="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+l+"&key="+v,o="youtube_playlist",i(h)):a()}).fail(function(t,e,i){alert("There was an error retrieveing youtube data: "+t.responseText),a()})}function n(t,e){var a=jQuery.extend(!0,{},r);return a.deeplink&&"youtube_single"!=a.type&&(a.deeplink+=(u+1).toString()),a.data=t,a.type="youtube",a.origtype=e,"youtube_single"==e||"youtube_single_list"==e?a.id=t.id:"youtube_playlist"==e?a.id=t.contentDetails.videoId:"youtube_video_query"==e&&(a.id=t.id.videoId),a.title||(a.title=t.snippet.title?t.snippet.title:null),a.description||(a.description=t.snippet.description?t.snippet.description:null),!a.thumb&&t.snippet.thumbnails?t.snippet.thumbnails.medium?a.thumb=t.snippet.thumbnails.medium.url:t.snippet.thumbnails.standard&&(a.thumb=t.snippet.thumbnails.standard.url):default_artwork&&(a.thumb=default_artwork),a.mp3=a.id,a.ogg="",a}var o,r,l,s,d,u,f,p,c=this,h=[],y=[],m=[],g=0,_="date rating relevance title videoCount viewCount".split(" "),v=e.ytAppId;jQuery.inArray(t.location.protocol,["http:","https:"]),this.setData=function(t){v&&""!=v?(y=[],h=$.extend(!0,[],[t]),a()):alert("Youtube APMBI key missing! Please set APMBI key in player settings.")}}}(window),function(t){function e(e,a){function i(e){l.playerReady=!0,l.forcePreviewStop||(t(l).trigger("ap_YoutubePlayer.YT_READY"),"undefined"!=typeof l._player.setVolume&&l._player.setVolume(100*l._defaultVolume),l._autoPlay&&l._player.playVideo())}function n(e){t(l).trigger("ap_YoutubePlayer.QUALITY_CHANGE",[e.data])}function o(e){return l.forceMainStop&&(l.forceMainStop=!1,"undefined"!=typeof l._player.stopVideo)?(l._player.stopVideo(),void t(l).trigger("ap_YoutubePlayer.FORCE_MAIN_STOP")):void(-1!=e.data&&(0==e.data?(t(l).trigger("ap_YoutubePlayer.END_PLAY"),l.loop&&l._player.playVideo()):1==e.data?(l.forcePreviewStop&&"undefined"!=typeof l._player.stopVideo&&l._player.stopVideo(),l._autoPlay=!0,l.small_embed&&"undefined"!=typeof l._player.setVolume&&l._player.setVolume(100*l._defaultVolume),l._inited||(t(l).trigger("ap_YoutubePlayer.START_PLAY"),l._inited=!0,!l.small_embed&&l.quality?l._player.setPlaybackQuality(l.quality):l.small_embed&&l._player.setPlaybackQuality(l._player.getAvailableQualityLevels()[l._player.getAvailableQualityLevels().length-1])),t(l).trigger("ap_YoutubePlayer.STATE_PLAYING")):2==e.data?t(l).trigger("ap_YoutubePlayer.STATE_PAUSED"):5==e.data&&t(l).trigger("ap_YoutubePlayer.STATE_CUED")))}function r(e){t(l).trigger("ap_YoutubePlayer.ERROR_HANDLER",[e.data])}var l=this;this.isIE=e.isIE?e.isIE:!1,this.isMobile=e.isMobile,this.initialAutoplay=e.initialAutoplay,this._inited=!1,this._player,this._autoPlay=e.autoPlay,this._defaultVolume=e.defaultVolume,this._youtubeHolder=e.youtubeHolder,this._frameId="ytplayer"+Math.floor(16777215*Math.random()),e.quality&&(this.quality=e.quality),e.small_embed&&(this.small_embed=e.small_embed),e.loop&&(this.loop=e.loop),this.lastID,this.playerReadyInterval=100,this.playerReadyIntervalID,this.playerReady=!1,this.protocol=e.protocol,0==e.youtubeChromeless&&(a.useControls=!0,a.ytShowinfo=!0);var s="?controls="+(a.useControls?1:0).toString(),d="&amp;autohide="+(a.autoHideControls?1:0).toString(),u="&amp;showinfo="+(a.ytShowinfo?1:0).toString(),f="&amp;modestbranding="+(a.ytModestbranding?1:0).toString(),p="&amp;rel="+(a.ytRel?1:0).toString(),c="&amp;theme="+(a.ytTheme?a.ytTheme:"dark");this.forcePreviewStop=this.forceMainStop=!1,this.youtubeVideoIframe=t("<iframe />",{frameborder:0,src:"https://www.youtube.com/embed/"+e.mediaPath+s+p+u+d+"&amp;enablejsapi=1"+c+f+"&amp;wmode=transparent",width:"100%",height:"100%",id:this._frameId,webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0}),this._youtubeHolder.css("display","block").append(this.youtubeVideoIframe),s=document.createElement("script"),s.src=this.protocol+"//www.youtube.com/iframe_api",d=document.getElementsByTagName("script")[0],d.parentNode.insertBefore(s,d);var h=setInterval(function(){window.YT&&window.YT.Player&&(h&&clearInterval(h),l._player=new YT.Player(l._frameId,{events:{onReady:i,onPlaybackQualityChange:n,onStateChange:o,onError:r}}))},100);window.onYouTubeIframeAPIReady=function(){}}t.youtubePlayer=function(t,a){return new e(t,a)},e.prototype={clean:function(t){this._player&&("undefined"!=typeof this._player.stopVideo&&this._player.stopVideo(),this._player=null),this.youtubeVideoIframe&&(this.youtubeVideoIframe.attr("src",""),this.youtubeVideoIframe.remove(),this.youtubeVideoIframe=null),this._youtubeHolder&&this._youtubeHolder.empty().css("display","none")},stopPreview:function(){this.forcePreviewStop=!0},initVideo:function(t,e){if(this.forcePreviewStop=this.forceMainStop=!1,this.quality=e,this.playerReady)this._player&&(this._inited=!1,this._autoPlay?"undefined"!=typeof this._player.loadVideoById&&this._player.loadVideoById(t):"undefined"!=typeof this._player.cueVideoById&&this._player.cueVideoById(t));else{var a=this;this.lastID=t,this.playerReadyIntervalID||(this.playerReadyIntervalID=setInterval(function(){a.playerReady&&(a.playerReadyIntervalID&&clearInterval(a.playerReadyIntervalID),a.forceMainStop||a.initVideo(a.lastID))},this.playerReadyInterval))}},stop:function(){this.forceMainStop=!0,this._player&&"undefined"!=typeof this._player.stopVideo&&this._player.stopVideo()},play:function(){this._player&&"undefined"!=typeof this._player.playVideo&&this._player.playVideo()},pause:function(){this._player&&"undefined"!=typeof this._player.pauseVideo&&this._player.pauseVideo()},togglePlayback:function(t){if(this._player)if(void 0==t){if("undefined"==typeof this._player.getPlayerState)return!1;t=this._player.getPlayerState(),1==t?"undefined"!=typeof this._player.pauseVideo&&this._player.pauseVideo():2==t?"undefined"!=typeof this._player.playVideo&&this._player.playVideo():-1!=t&&5!=t&&0!=t||"undefined"==typeof this._player.playVideo||this._player.playVideo()}else t?"undefined"!=typeof this._player.playVideo&&this._player.playVideo():"undefined"!=typeof this._player.pauseVideo&&this._player.pauseVideo()},seek:function(t){this._player&&"undefined"!=typeof this._player.seekTo&&this._player.seekTo(t)},isMuted:function(){return this._player&&"undefined"!=typeof this._player.isMuted?this._player.isMuted():void 0},getDuration:function(){return this._player&&"undefined"!=typeof this._player.getDuration?this._player.getDuration():void 0},getCurrentTime:function(){return this._player&&"undefined"!=typeof this._player.getCurrentTime?this._player.getCurrentTime():void 0},getVideoLoadedFraction:function(){return this._player&&"undefined"!=typeof this._player.getVideoLoadedFraction?this._player.getVideoLoadedFraction():void 0},getVideoBytesLoaded:function(){return this._player&&"undefined"!=typeof this._player.getVideoBytesLoaded?this._player.getVideoBytesLoaded():void 0},getVideoBytesTotal:function(){return this._player&&"undefined"!=typeof this._player.getVideoBytesTotal?this._player.getVideoBytesTotal():void 0},setVolume:function(t){0>t?vol=0:t>1&&(t=1),this._player&&"undefined"!=typeof this._player.setVolume&&this._player.setVolume(100*t)},getPlayerState:function(){return this._player&&"undefined"!=typeof this._player.getPlayerState?this._player.getPlayerState():void 0},setAutoPlay:function(t){this._autoPlay=t},getQualityLevels:function(){return this._player.getAvailableQualityLevels()},getCurrQuality:function(){return this._player.getPlaybackQuality()},setPlaybackQuality:function(t){this._player.setPlaybackQuality(t)}}}(jQuery),function(t){function e(t){this._loopingOn=t.loopingOn,this._randomPlay=t.randomPlay,this._playlistItems,this._lastInOrder=!1,this._counter=-1,this._lastPlayedFromPlaylistClick,this._lastRandomCounter,this._randomPaused=!1,this._randomArr=[],this._playlistSelect=!1}t.playlistManager=function(t){return new e(t)},e.prototype={setCounter:function(t,e){"undefined"==typeof e&&(e=!0),this._counter=e?this._counter+parseInt(t,10):parseInt(t,10),this._checkCounter()},getCounter:function(){return this._randomPlay?this._playlistSelect?this._counter:this._randomArr[this._counter]:this._counter},advanceHandler:function(t){this._playlistSelect=!1,this._randomPaused?this._handleRandomPaused(t):this.setCounter(t)},processPlaylistRequest:function(t){this._playlistSelect=!1,this._randomPlay&&(this._playlistSelect=!0,this._lastPlayedFromPlaylistClick=t,this._randomPaused||(this._lastRandomCounter=this._counter,this._randomPaused=!0)),this.setCounter(t,!1)},getLastInOrder:function(){return this._lastInOrder},getRandomPaused:function(){return this._randomPaused},setPlaylistItems:function(t,e){"undefined"==typeof e&&(e=!0),e&&(this._counter=-1),this._playlistItems=t,this._randomPlay&&this._makeRandomList()},reSetCounter:function(t){"undefined"==typeof t?this._counter=-1:(t=parseInt(t,10),this._playlistItems?(t>this._playlistItems-1?t=this._playlistItems-1:0>t&&(t=0),this._counter=t):this._counter=-1)},setRandom:function(t){(this._randomPlay=t)&&this._makeRandomList(),this._randomChange()},setLooping:function(t){this._loopingOn=t},_handleRandomPaused:function(e){var a=t(this);this._randomPaused=!1,this._lastRandomCounter+e>this._playlistItems-1?(this._counter=this._playlistItems-1,a.trigger("ap_PlaylistManager.COUNTER_READY")):0>this._lastRandomCounter+e?(this._counter=0,a.trigger("ap_PlaylistManager.COUNTER_READY")):this.setCounter(this._lastRandomCounter+e,!1)},_randomChange:function(){this._randomPlay?(this._activeIndexFirst(),this._counter=0):this._randomPaused?(this._counter=this._lastPlayedFromPlaylistClick,this._randomPaused=!1):this._counter=this._randomArr[this._counter]},_checkCounter:function(){if(isNaN(this._counter))alert("ap_PlaylistManager message: No active media, counter = "+this._counter);else{var e=t(this);this._lastInOrder=!1,this._loopingOn?(this._randomPlay?this._counter>this._playlistItems-1?(this._counter=this._randomArr[this._playlistItems-1],this._makeRandomList(),this._firstIndexCheck(),this._counter=0,e.trigger("ap_PlaylistManager.PLAYLIST_END")):0>this._counter&&(this._counter=this._randomArr[0],this._makeRandomList(),this._lastIndexCheck(),this._counter=this._playlistItems-1):this._counter>this._playlistItems-1?(this._counter=0,e.trigger("ap_PlaylistManager.PLAYLIST_END")):0>this._counter&&(this._counter=this._playlistItems-1),e.trigger("ap_PlaylistManager.COUNTER_READY")):(this._counter>this._playlistItems-1?(this._counter=this._playlistItems-1,this._lastInOrder=!0):0>this._counter&&(this._counter=0),this._lastInOrder?e.trigger("ap_PlaylistManager.PLAYLIST_END"):e.trigger("ap_PlaylistManager.COUNTER_READY"))}},_makeRandomList:function(){3>this._playlistItems||(this._randomArr=this._randomiseIndex(this._playlistItems))},_firstIndexCheck:function(){if(this._randomArr[0]==this._counter){var t=this._randomArr.splice(0,1);this._randomArr.push(t)}},_lastIndexCheck:function(){if(this._randomArr[this._playlistItems-1]==this._counter){var t=this._randomArr.splice(this._playlistItems-1,1);this._randomArr.unshift(t)}},_activeIndexFirst:function(){var t,e=this._randomArr.length;for(t=0;e>t;t++)if(this._randomArr[t]==this._counter){if(0==t)break;t=this._randomArr.splice(t,1),this._randomArr.unshift(parseInt(t,10));break}},_randomiseIndex:function(t){var e,a=[],i=[];for(e=0;t>e;e++)a[e]=e;var n;for(e=0;t>e;e++)n=Math.round(Math.random()*(a.length-1)),i[e]=a[n],a.splice(n,1);return i}}}(jQuery),function(t){apTextScroller=function(){function t(){"left"==r&&(p-=a,e.css("left",p+"px"),parseInt(e.css("left"),10)<-o&&(p=-a))}var e,a,i,n,o,r,l,s,d,u,f,p=0,c=!1;this.init=function(t,o,l,d,u,f){s=t,e=o,i=l,r=d,n=u,a=f},this.input=function(t){d=t,s.html(t),u=s.width();var a=t.replace(/\s/g,"&nbsp;")+n;if(e.html(""),e.css("width","auto"),e.html(a),o=e.width(),0!=o){if(t=a,o<=2*i.width()){for(var r=Math.floor(2*i.width()/o),l=0;2>l;l++)t+=a;a=o*(r+1)}else t+=a,a=2*o;e.html(t),e.css("width",a+1+"px"),f=t,c=!0}},this.inputSingle=function(t){},this.activate=function(){this.deactivate(),i.width()>=u?e.html(d):(e.html(f),l=setInterval(t,100))},this.deactivate=function(){l&&clearInterval(l),"left"==r&&(e.css("left","0px"),p=0)},this.checkSize=function(){c&&(i.width()>=u?(this.deactivate(),e.html(d)):(e.html(f),this.activate()))}}}(jQuery);